{"version":3,"sources":["Footer.jsx","Header.jsx","Spinner.jsx","services/useFetch.js","PageNotFound.jsx","Products.jsx","cartReducer.js","cartContext.js","Detail.class.jsx","Cart.jsx","services/useFetchAll.js","services/shippingService.js","Checkout.class.jsx","App.jsx","ErrorBoundary.jsx","index.js"],"names":["Footer","activeStyle","color","Header","to","alt","src","Spinner","className","baseUrl","process","REACT_APP_API_BASE_URL","useFetch","url","isMounted","useRef","useState","data","setData","error","setError","loading","setLoading","useEffect","a","fetch","response","ok","json","current","init","Fetch","children","PageNotFound","Products","size","setSize","category","useParams","products","filteredProducts","filter","p","skus","find","s","parseInt","length","id","htmlFor","value","onChange","e","target","map","key","image","name","price","cartReducer","cart","action","type","quantity","sku","i","Error","initialCart","CartContext","React","createContext","JSON","parse","localStorage","getItem","console","CartProvider","props","useReducer","dispatch","setItem","stringify","contextValue","Provider","useCart","context","useContext","DetailWrapper","navigate","useNavigate","Detail","state","this","Consumer","product","description","setState","disabled","onClick","Component","Cart","urls","prevUrls","array1","array2","every","index","promises","then","Promise","all","catch","finally","useFetchAll","numItemsInCart","reduce","total","item","itemInCart","aria-label","saveShippingAddress","address","method","headers","body","STATUS","emptyAddress","city","country","Checkout","status","saveError","touched","handleChange","persist","handleBlur","event","handleSubmit","preventDefault","isValid","errors","getErrors","Object","keys","result","role","onSubmit","onBlur","App","path","element","ErrorBoundary","hasError","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c27849f2.chunk.js","sourcesContent":["import React from \"react\";\n\nexport default function Footer() {\n  return (\n    <footer>\n      <p>\n        This site is created for demonstrative purposes only and does not offer\n        any real products or services.\n      </p>\n      <p>&copy; Pluralsight 2020</p>\n    </footer>\n  );\n}\n","import React from \"react\";\nimport { Link, NavLink } from \"react-router-dom\";\n\nconst activeStyle = {\n  color: \"purple\",\n};\n\nexport default function Header() {\n  return (\n    <header>\n      <nav>\n        <ul>\n          <li>\n            <Link to=\"/\">\n              <img alt=\"Carved Rock Fitness\" src=\"/images/logo.png\" />\n            </Link>\n          </li>\n          <li>\n            <NavLink activeStyle={activeStyle} to=\"/shoes\">\n              Shoes\n            </NavLink>\n          </li>\n          <li>\n            <NavLink activeStyle={activeStyle} to=\"/backpacks\">\n              Backpacks\n            </NavLink>\n          </li>\n          <li>\n            <NavLink activeStyle={activeStyle} to=\"/cart\">\n              Cart\n            </NavLink>\n          </li>\n        </ul>\n      </nav>\n    </header>\n  );\n}\n","import React from \"react\";\n\nexport default function Spinner() {\n  return (\n    <div className=\"lds-container\">\n      <div className=\"lds-dual-ring\"></div>\n    </div>\n  );\n}\n","import { useState, useRef, useEffect } from \"react\";\n\nconst baseUrl = process.env.REACT_APP_API_BASE_URL;\n\nexport default function useFetch(url) {\n  const isMounted = useRef(false);\n  const [data, setData] = useState(null);\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    isMounted.current = true;\n    async function init() {\n      try {\n        const response = await fetch(baseUrl + url);\n        if (response.ok) {\n          const json = await response.json();\n          if (isMounted.current) setData(json);\n        } else {\n          throw response;\n        }\n      } catch (e) {\n        if (isMounted.current) setError(e);\n      } finally {\n        if (isMounted.current) setLoading(false);\n      }\n    }\n    init();\n\n    return () => {\n      isMounted.current = false;\n    };\n  }, [url]);\n\n  return { data, error, loading };\n}\n\nexport function Fetch({ url, children }) {\n  const { data, loading, error } = useFetch(url);\n  return children(data, loading, error);\n}\n","import React from \"react\";\n\nexport default function PageNotFound() {\n  return <h1>Page not found.</h1>;\n}\n","import React, { useState } from \"react\";\nimport Spinner from \"./Spinner\";\nimport useFetch from \"./services/useFetch\";\nimport { useParams } from \"react-router-dom\";\nimport PageNotFound from \"./PageNotFound\";\nimport { Link } from \"react-router-dom\";\n\nexport default function Products() {\n  const [size, setSize] = useState(\"\");\n  const { category } = useParams();\n\n  const { data: products, loading, error } = useFetch(\n    \"products?category=\" + category\n  );\n\n  function renderProduct(p) {\n    return (\n      <div key={p.id} className=\"product\">\n        <Link to={`/${category}/${p.id}`}>\n          <img src={`/images/${p.image}`} alt={p.name} />\n          <h3>{p.name}</h3>\n          <p>${p.price}</p>\n        </Link>\n      </div>\n    );\n  }\n\n  const filteredProducts = size\n    ? products.filter((p) => p.skus.find((s) => s.size === parseInt(size)))\n    : products;\n\n  if (error) throw error;\n  if (loading) return <Spinner />;\n  if (products.length === 0) return <PageNotFound />;\n\n  return (\n    <>\n      <section id=\"filters\">\n        <label htmlFor=\"size\">Filter by Size:</label>{\" \"}\n        <select\n          id=\"size\"\n          value={size}\n          onChange={(e) => setSize(e.target.value)}\n        >\n          <option value=\"\">All sizes</option>\n          <option value=\"7\">7</option>\n          <option value=\"8\">8</option>\n          <option value=\"9\">9</option>\n        </select>\n        {size && <h2>Found {filteredProducts.length} items</h2>}\n      </section>\n      <section id=\"products\">{filteredProducts.map(renderProduct)}</section>\n    </>\n  );\n}\n","export default function cartReducer(cart, action) {\n  switch (action.type) {\n    case \"empty\":\n      return [];\n    case \"updateQuantity\": {\n      const { quantity, sku } = action;\n      return quantity === 0\n        ? cart.filter((i) => i.sku !== sku)\n        : cart.map((i) => (i.sku === sku ? { ...i, quantity } : i));\n    }\n    case \"add\":\n      const { id, sku } = action;\n      const itemInCart = cart.find((i) => i.sku === sku);\n      if (itemInCart) {\n        // Return new array with the matching item replaced\n        return cart.map((i) =>\n          i.sku === sku ? { ...i, quantity: i.quantity + 1 } : i\n        );\n      } else {\n        // Return new array with the new item appended\n        return [...cart, { id, sku, quantity: 1 }];\n      }\n    default:\n      throw new Error(\"Unhandled action \" + action.type);\n  }\n}\n","import React, { useReducer, useEffect, useContext } from \"react\";\nimport cartReducer from \"./cartReducer\";\n\nexport const CartContext = React.createContext(null);\n\nlet initialCart;\ntry {\n  initialCart = JSON.parse(localStorage.getItem(\"cart\")) ?? [];\n} catch {\n  console.error(\"The cart could not be parsed into JSON.\");\n  initialCart = [];\n}\n\nexport function CartProvider(props) {\n  const [cart, dispatch] = useReducer(cartReducer, initialCart);\n  useEffect(() => localStorage.setItem(\"cart\", JSON.stringify(cart)), [cart]);\n  const contextValue = {\n    cart,\n    dispatch,\n  };\n  return (\n    <CartContext.Provider value={contextValue}>\n      {props.children}\n    </CartContext.Provider>\n  );\n}\n\nexport function useCart() {\n  const context = useContext(CartContext);\n  if (!context) {\n    throw new Error(\n      \"useCart must be used within a CartProvider. Wrap a parent component in <CartProvider> to fix this error.\"\n    );\n  }\n  return context;\n}\n","import React from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { Fetch } from \"./services/useFetch\";\nimport Spinner from \"./Spinner\";\nimport PageNotFound from \"./PageNotFound\";\nimport { CartContext } from \"./cartContext\";\n\nexport default function DetailWrapper() {\n  const { id } = useParams();\n  return <Detail id={id} navigate={useNavigate()} />;\n}\n\nclass Detail extends React.Component {\n  state = {\n    sku: \"\",\n  };\n\n  render() {\n    const { id, navigate } = this.props;\n    const { sku } = this.state;\n\n    return (\n      <CartContext.Consumer>\n        {({ dispatch }) => {\n          return (\n            <Fetch url={`products/${id}`}>\n              {(product, loading, error) => {\n                if (loading) return <Spinner />;\n                if (!product) return <PageNotFound />;\n                if (error) throw error;\n\n                return (\n                  <div id=\"detail\">\n                    <h1>{product.name}</h1>\n                    <p>{product.description}</p>\n                    <p id=\"price\">${product.price}</p>\n\n                    <select\n                      id=\"size\"\n                      value={sku}\n                      onChange={(e) => this.setState({ sku: e.target.value })}\n                    >\n                      <option value=\"\">What size?</option>\n                      {product.skus.map((s) => (\n                        <option key={s.sku} value={s.sku}>\n                          {s.size}\n                        </option>\n                      ))}\n                    </select>\n\n                    <p>\n                      <button\n                        disabled={!sku}\n                        className=\"btn btn-primary\"\n                        onClick={() => {\n                          dispatch({ type: \"add\", id, sku });\n                          navigate(\"/cart\");\n                        }}\n                      >\n                        Add to cart\n                      </button>\n                    </p>\n                    <img\n                      src={`/images/${product.image}`}\n                      alt={product.category}\n                    />\n                  </div>\n                );\n              }}\n            </Fetch>\n          );\n        }}\n      </CartContext.Consumer>\n    );\n  }\n}\n","import React from \"react\";\nimport useFetchAll from \"./services/useFetchAll\";\nimport Spinner from \"./Spinner\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useCart } from \"./cartContext\";\n\nexport default function Cart() {\n  const { cart, dispatch } = useCart();\n  const navigate = useNavigate();\n  const urls = cart.map((i) => `products/${i.id}`);\n  const { data: products, loading, error } = useFetchAll(urls);\n\n  function renderItem(itemInCart) {\n    const { id, sku, quantity } = itemInCart;\n    const { price, name, image, skus } = products.find(\n      (p) => p.id === parseInt(id)\n    );\n    const { size } = skus.find((s) => s.sku === sku);\n\n    return (\n      <li key={sku} className=\"cart-item\">\n        <img src={`/images/${image}`} alt={name} />\n        <div>\n          <h3>{name}</h3>\n          <p>${price}</p>\n          <p>Size: {size}</p>\n          <p>\n            <select\n              aria-label={`Select quantity for ${name} size ${size}`}\n              onChange={(e) =>\n                dispatch({\n                  type: \"updateQuantity\",\n                  sku,\n                  quantity: parseInt(e.target.value),\n                })\n              }\n              value={quantity}\n            >\n              <option value=\"0\">Remove</option>\n              <option value=\"1\">1</option>\n              <option value=\"2\">2</option>\n              <option value=\"3\">3</option>\n              <option value=\"4\">4</option>\n              <option value=\"5\">5</option>\n            </select>\n          </p>\n        </div>\n      </li>\n    );\n  }\n\n  if (loading) return <Spinner />;\n  if (error) throw error;\n\n  const numItemsInCart = cart.reduce((total, item) => total + item.quantity, 0);\n\n  return (\n    <section id=\"cart\">\n      <h1>\n        {numItemsInCart === 0\n          ? \"Your cart is empty\"\n          : `${numItemsInCart} Item${numItemsInCart > 1 ? \"s\" : \"\"} in My Cart`}\n      </h1>\n      <ul>{cart.map(renderItem)}</ul>\n      {cart.length > 0 && (\n        <button\n          className=\"btn btn-primary\"\n          onClick={() => navigate(\"/checkout\")}\n        >\n          Checkout\n        </button>\n      )}\n    </section>\n  );\n}\n","import { useState, useRef, useEffect } from \"react\";\n\nexport default function useFetchAll(urls) {\n  const prevUrls = useRef([]);\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    // Only run if the array of URLs passed in changes\n    if (areEqual(prevUrls.current, urls)) {\n      setLoading(false);\n      return;\n    }\n    prevUrls.current = urls;\n\n    const promises = urls.map((url) =>\n      fetch(process.env.REACT_APP_API_BASE_URL + url).then((response) => {\n        if (response.ok) return response.json();\n        throw response;\n      })\n    );\n\n    Promise.all(promises)\n      .then((json) => setData(json))\n      .catch((e) => {\n        console.error(e);\n        setError(e);\n      })\n      .finally(() => setLoading(false));\n  }, [urls]);\n\n  return { data, loading, error };\n}\n\nfunction areEqual(array1, array2) {\n  return (\n    array1.length === array2.length &&\n    array1.every((value, index) => value === array2[index])\n  );\n}\n","const baseUrl = process.env.REACT_APP_API_BASE_URL;\n\nexport async function getShippingAddress(userId) {\n  return fetch(baseUrl + \"shippingAddress/\" + userId).then((response) => {\n    if (response.ok) return response.json();\n    throw response;\n  });\n}\n\nexport async function saveShippingAddress(address) {\n  return fetch(baseUrl + \"shippingAddress\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(address),\n  });\n}\n","import React from \"react\";\nimport { saveShippingAddress } from \"./services/shippingService\";\n\nconst STATUS = {\n  IDLE: \"IDLE\",\n  SUBMITTED: \"SUBMITTED\",\n  SUBMITTING: \"SUBMITTING\",\n  COMPLETED: \"COMPLETED\",\n};\n\n// Declaring outside component to avoid recreation on each render\nconst emptyAddress = {\n  city: \"\",\n  country: \"\",\n};\n\nexport default class Checkout extends React.Component {\n  state = {\n    address: emptyAddress,\n    status: STATUS.IDLE,\n    saveError: null,\n    touched: {},\n  };\n\n  isValid() {\n    const errors = this.getErrors(this.state.address);\n    return Object.keys(errors).length === 0;\n  }\n\n  handleChange = (e) => {\n    e.persist(); // persist the event\n    this.setState((state) => {\n      return {\n        address: {\n          ...state.address,\n          [e.target.id]: e.target.value,\n        },\n      };\n    });\n  };\n\n  handleBlur = (event) => {\n    event.persist();\n    this.setState((state) => {\n      return { touched: { ...state.touched, [event.target.id]: true } };\n    });\n  };\n\n  handleSubmit = async (event) => {\n    event.preventDefault();\n    this.setState({ status: STATUS.SUBMITTING });\n    if (this.isValid()) {\n      try {\n        await saveShippingAddress(this.state.address);\n        this.props.dispatch({ type: \"empty\" });\n        this.setState({ status: STATUS.COMPLETED });\n      } catch (e) {\n        this.setState({ saveError: e });\n      }\n    } else {\n      this.setState({ status: STATUS.SUBMITTED });\n    }\n  };\n\n  getErrors(address) {\n    const result = {};\n    if (!address.city) result.city = \"City is required\";\n    if (!address.country) result.country = \"Country is required\";\n    return result;\n  }\n\n  render() {\n    const { status, saveError, touched, address } = this.state;\n\n    //Derived state\n    const errors = this.getErrors(this.state.address);\n\n    if (saveError) throw saveError;\n    if (status === STATUS.COMPLETED) {\n      return <h1>Thanks for shopping!</h1>;\n    }\n\n    return (\n      <>\n        <h1>Shipping Info</h1>\n        {!this.isValid() && status === STATUS.SUBMITTED && (\n          <div role=\"alert\">\n            <p>Please fix the following errors:</p>\n            <ul>\n              {Object.keys(errors).map((key) => {\n                return <li key={key}>{errors[key]}</li>;\n              })}\n            </ul>\n          </div>\n        )}\n        <form onSubmit={this.handleSubmit}>\n          <div>\n            <label htmlFor=\"city\">City</label>\n            <br />\n            <input\n              id=\"city\"\n              type=\"text\"\n              value={address.city}\n              onBlur={this.handleBlur}\n              onChange={this.handleChange}\n            />\n            <p role=\"alert\">\n              {(touched.city || status === STATUS.SUBMITTED) && errors.city}\n            </p>\n          </div>\n\n          <div>\n            <label htmlFor=\"country\">Country</label>\n            <br />\n            <select\n              id=\"country\"\n              value={address.country}\n              onBlur={this.handleBlur}\n              onChange={this.handleChange}\n            >\n              <option value=\"\">Select Country</option>\n              <option value=\"China\">China</option>\n              <option value=\"India\">India</option>\n              <option value=\"United Kingdom\">United Kingdom</option>\n              <option value=\"USA\">USA</option>\n            </select>\n\n            <p role=\"alert\">\n              {(touched.country || status === STATUS.SUBMITTED) &&\n                errors.country}\n            </p>\n          </div>\n\n          <div>\n            <input\n              type=\"submit\"\n              className=\"btn btn-primary\"\n              value=\"Save Shipping Info\"\n              disabled={status === STATUS.SUBMITTING}\n            />\n          </div>\n        </form>\n      </>\n    );\n  }\n}\n","import React from \"react\";\nimport \"./App.css\";\nimport Footer from \"./Footer\";\nimport Header from \"./Header\";\nimport Products from \"./Products\";\nimport { Routes, Route } from \"react-router-dom\";\nimport Detail from \"./Detail.class\";\nimport Cart from \"./Cart\";\nimport Checkout from \"./Checkout.class\";\nimport { useCart } from \"./cartContext\";\n\nexport default function App() {\n  const { dispatch } = useCart();\n  return (\n    <>\n      <div className=\"content\">\n        <Header />\n        <main>\n          <Routes>\n            <Route path=\"/\" element={<h1>Welcome to Carved Rock Fitness</h1>} />\n            <Route path=\"/:category\" element={<Products />} />\n            <Route path=\"/:category/:id\" element={<Detail />} />\n            <Route path=\"/cart\" element={<Cart />} />\n            <Route\n              path=\"/checkout\"\n              element={<Checkout dispatch={dispatch} />}\n            />\n          </Routes>\n        </main>\n      </div>\n      <Footer />\n    </>\n  );\n}\n","import React from \"react\";\n\nexport default class ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return <h1>Something went wrong.</h1>;\n    }\n\n    return this.props.children;\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport ErrorBoundary from \"./ErrorBoundary\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { CartProvider } from \"./cartContext\";\n\nReactDOM.render(\n  <ErrorBoundary>\n    <BrowserRouter>\n      <CartProvider>\n        <App />\n      </CartProvider>\n    </BrowserRouter>\n  </ErrorBoundary>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}